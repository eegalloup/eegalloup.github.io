<!DOCTYPE html>
<html>
<head>
  <title>Logging In...</title>
</head>
<body>
  <p>Logging you in...</p>

  <script>
    const hash = window.location.hash.substr(1);
    const params = new URLSearchParams(hash);
    const token = params.get('access_token');
  
    if (token) {
      localStorage.setItem('patreon_token', token);
      document.body.innerHTML = `
        <p style="font-family:monospace">✅ Token saved!</p>
        <p><strong>Access token:</strong></p>
        <code>${token}</code>
        <p>Redirecting in 3 seconds…</p>
      `;
      setTimeout(() => {
        window.location.href = '/index.html';
      }, 3000);
    } else {
      document.body.innerHTML = '<p>❌ Login failed. No access token found.</p>';
    }
  </script>
</body>
</html>